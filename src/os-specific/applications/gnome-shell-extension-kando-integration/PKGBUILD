pkgname=gnome-shell-extension-kando-integration
pkgver=0.9.0
pkgrel=1
pkgdesc="GNOME Shell extension required for Kando to work on Wayland."
arch=('any')
url='https://github.com/kando-menu/gnome-shell-integration'
license=('MIT')
depends=('gnome-shell')
makedepends=('git' 'zip')
source=("git+https://github.com/kando-menu/gnome-shell-integration.git#tag=v$pkgver")
sha512sums=('3fc75facac61b5c67e3255aa0564d975e7464f3e3d869d52af24c336a8bad0df85936aad39c47fd8a419dd773914ee3073f999632600cb611dd520395f05f11d')

build() {
  cd gnome-shell-integration

  make
}

package() {
  cd gnome-shell-integration

  install -dm 755 "$pkgdir/usr/share/gnome-shell/extensions/kando-integration@kando-menu.github.io"

  unzip kando-integration@kando-menu.github.io.zip -d "$pkgdir/usr/share/gnome-shell/extensions/kando-integration@kando-menu.github.io"

  glib-compile-schemas "$pkgdir/usr/share/gnome-shell/extensions/kando-integration@kando-menu.github.io/schemas"
}
