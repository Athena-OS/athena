pkgname=gnome-shell-extension-kando-integration
pkgver=v0.9.0
pkgrel=1
pkgdesc="GNOME Shell extension required for Kando to work on Wayland."
arch=('any')
url='https://github.com/kando-menu/gnome-shell-integration'
license=('MIT')
depends=('gnome-shell')
makedepends=('git' 'zip')
source=("git+https://github.com/kando-menu/gnome-shell-integration.git#tag=v$pkgver")
sha512sums=('ef0b1926393d1f28a258b127262dcfa36cb2c699bd51b33ffe24daa5b81c9950e736d0c0e2a36ebc8c78d4d5250ed0e94528e04fa7726936e2a60d8669738d5c')

build() {
  cd gnome-shell-integration

  make
}

package() {
  cd gnome-shell-integration

  install -dm 755 "$pkgdir/usr/share/gnome-shell/extensions/kando-integration@kando-menu.github.io"

  unzip kando-integration@kando-menu.github.io.zip -d "$pkgdir/usr/share/gnome-shell/extensions/kando-integration@kando-menu.github.io"

  glib-compile-schemas "$pkgdir/usr/share/gnome-shell/extensions/kando-integration@kando-menu.github.io/schemas"
}
