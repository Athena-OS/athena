# Credits BlackArch ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=ratproxy
pkgver=1.58
pkgrel=6
groups=('athena' 'athena-fuzzer' 'athena-proxy' 'athena-scanner'
        'athena-webapp')
pkgdesc='A passive web application security assessment tool.'
url='https://code.google.com/p/ratproxy/'
license=('Apache-2.0')
arch=('x86_64' 'aarch64')
source=("https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/ratproxy/$pkgname-$pkgver.tar.gz"
        "fix-make-fcommon.patch")
sha512sums=('432189c5863e0937f4dea92087847e6af1563e7a49a6b91b3f610ceb5aa1e25ac24a3bd837298abccfece7b1ad088ffe20cbfcb540dee164a4264bcb10ce89a2'
            '1a8078244273a20ab6b2dc04ed0dfaf58672dd4b02b21bfb1d3256f8311364dd01f096986fbf474c2f2a92ea5369ddba0ee29f67fa0943c959f474274f834d6c')

prepare() {
  cd $pkgname

  patch -p1 < "$srcdir/fix-make-fcommon.patch"
}

build() {
  cd $pkgname

  make
}

package() {
  cd $pkgname

  install -Dm 755 $pkgname "$pkgdir/usr/bin/$pkgname"
  install -Dm 755 "$pkgname-report.sh" \
    "$pkgdir/usr/share/$pkgname/ratproxy-report.sh"
  install -Dm 644 doc/COPYING "$pkgdir/usr/share/licenses/$pkgname/COPYING"
  install -Dm 644 "$srcdir/$pkgname/$pkgname-back.png" \
    "$pkgdir/usr/share/$pkgname/$pkgname-back.png"
}

