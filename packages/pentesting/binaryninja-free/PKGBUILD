# Credits BlackArch ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=binaryninja-free
pkgver=3.5.4526
pkgrel=1
pkgdesc='A new kind of reversing platform (free version).'
groups=('athena' 'athena-reversing' 'athena-binary')
arch=('x86_64')
url='https://binary.ninja/free/'
license=('custom:commercial' 'evaluation')
depends=('libglvnd' 'libxkbcommon-x11')
source=('https://cdn.binary.ninja/installers/binaryninja_free_linux.zip')
sha512sums=('26d724ec372107b60929fd036a71da502e56f7d2b67993c666cce3122dda8be5993cf51b4d6a2db4ce31a94adec6b78c98dc4eea2577c9aa3b70e6a5a334ce02')

package() {
  cd binaryninja

  install -dm 755 "$pkgdir/usr/bin"
  install -dm 755 "$pkgdir/usr/share/$pkgname"

  install -Dm 644 $srcdir/LICENSE \
    "$pkgdir/usr/share/licenses/$pkgname/LICENSE"

  cp -a * "$pkgdir/usr/share/$pkgname"

  cat > "$pkgdir/usr/bin/$pkgname" << EOF
#!/bin/sh
cd /usr/share/$pkgname
exec ./binaryninja "\$@"
EOF

  chmod +x "$pkgdir/usr/bin/$pkgname"
}

