# Credits BlackArch ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=mboxgrep
pkgver=0.7.12
pkgrel=1
pkgdesc='A small, non-interactive utility that scans mail folders for messages matching regular expressions. It does matching against basic and extended POSIX regular expressions, and reads and writes a variety of mailbox formats.'
url='https://mboxgrep.org'
groups=('athena' 'athena-forensic')
license=('GPL-1.0-or-later')
depends=('pcre' 'bzip2' 'zlib')
arch=('x86_64' 'aarch64')
source=("https://git.datatipp.se/dspiljar/mboxgrep/releases/download/$pkgver/$pkgname-$pkgver.tar.gz")
sha512sums=('38a827b51cdc12782f38c93bf6dfdbd4c2d2e166f6482d28a9c271769770bb8cfcbde79385492059cf813366a2396d4d35efb21846f90fc8f8b6014bd6d02289')

build() {
  cd "$pkgname-$pkgver"

  ./configure --prefix=/usr --mandir="$pkgdir/usr/share/man" \
    --infodir="$pkgdir/usr/share/info"

  make
}
package(){
  cd "$pkgname-$pkgver/src"

  install -dm 755 "$pkgdir/usr/bin"
  install -dm 755 "$pkgdir/usr/share/$pkgname"

  cp -aR $pkgname "$pkgdir/usr/share/$pkgname/"

  ln -s "/usr/share/$pkgname/$pkgname" "$pkgdir/usr/bin/"
}

