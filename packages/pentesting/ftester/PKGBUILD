# Credits BlackArch ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=ftester
pkgver=1.2d8f0eb
pkgrel=1
groups=('athena' 'athena-fuzzer')
pkgdesc='A tool designed for testing firewall filtering policies and Intrusion Detection System (IDS) capabilities.'
url='https://inversepath.com/ftester.html'
arch=('any')
license=('GPL-3.0-or-later')
depends=('perl' 'perl-netpacket' 'perl-net-rawip' 'perl-net-pcaputils')
source=("git+https://github.com/f-secure-foundry/$pkgname.git")
sha512sums=('SKIP')

pkgver() {
  cd $pkgname

  echo $(git rev-list --count HEAD).$(git rev-parse --short HEAD)
}

package() {
  cd $pkgname

  install -Dm 755 freport ftest ftestd -t "$pkgdir/usr/bin/"

  install -Dm 644 $pkgname.8 "$pkgdir/usr/share/man/man8/$pkgname.8"
  install -Dm 644 ftest.conf "$pkgdir/etc/$pkgname"

  for i in COPYING CREDITS Changelog LICENSE README ; do
    install -Dm 644 $i -t "$pkgdir/usr/share/$pkgname"
  done
}

