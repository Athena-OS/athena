# Credits BlackArch ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=ntfs-log-tracker
pkgver=1.71
pkgrel=1
epoch=1
groups=('athena' 'athena-forensic' 'athena-windows')
pkgdesc='This tool can parse $LogFile, $UsnJrnl of NTFS.'
arch=('x86_64')
url='https://sites.google.com/site/forensicnote/ntfs-log-tracker'
license=('custom:unknown')
depends=('wine' 'wine_gecko' 'wine-mono')
source=("ntfs-log-tracker.zip::https://drive.usercontent.google.com/download?id=12Xzp0GW9KqaejFrK7ewGYzKWNEjRgP1P&export=download&authuser=0")
sha512sums=('af78453aa04566cca844f33e3560f7d1d8da4bfcb60d2099289108823393d8709f8e594de08ff0c9dde19b2c18036f425f222f4e33b39361d80611583534eee2')

package() {
  cd "NTFS Log Tracker v$pkgver CMD"

  install -dm 755 "$pkgdir/usr/bin"
  install -dm 755 "$pkgdir/usr/share/windows/$pkgname"

  cp --no-preserve=ownership sqlite3.dll "NTFS_Log_Tracker_CMD.exe" \
    "$pkgdir/usr/share/windows/$pkgname/"

  cat > "$pkgdir/usr/bin/$pkgname" << EOF
#!/bin/sh
cd /usr/share/windows/$pkgname
exec wine NTFS_Log_Tracker_CMD.exe "\$@"
EOF

  chmod +x "$pkgdir/usr/bin/$pkgname"
}

