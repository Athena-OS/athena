# Credits BlackArch ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=seat
pkgver=3.eb3959c
pkgrel=1
groups=('athena' 'athena-scanner' 'athena-recon')
pkgdesc='Next generation information digging application geared toward the needs of security professionals. It uses information stored in search engine databases, cache repositories, and other public resources to scan web sites for potential vulnerabilities.'
arch=('any')
url='https://github.com/iphelix/seat'
license=('GPL-2.0-or-later')
depends=('perl' 'perl-xml-smart' 'gtk2-perl' 'gtk2' 'perl-object-multitype')
source=("git+https://github.com/iphelix/$pkgname.git")
sha512sums=('SKIP')

pkgver() {
  cd $pkgname

  echo $(git rev-list --count HEAD).$(git rev-parse --short HEAD)
}

package() {
  cd $pkgname

  install -dm 755 "$pkgdir/usr/bin"
  install -dm 755 "$pkgdir/usr/share/$pkgname"

  install -Dm 644 -t "$pkgdir/usr/share/doc/$pkgname/" CHANGELOG VERSION \
    "SEAT Documentation.pdf"
  install -Dm 644 LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"

  rm -rf CHANGELOG VERSION LICENSE *.pdf LICENSE

  cp -a * "$pkgdir/usr/share/$pkgname/"

  cat > "$pkgdir/usr/bin/$pkgname" << EOF
#!/bin/sh
cd /usr/share/$pkgname
exec perl $pkgname "\$@"
EOF

  chmod +x "$pkgdir/usr/bin/$pkgname"
}

