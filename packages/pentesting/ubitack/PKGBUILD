# Credits BlackArch ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=ubitack
pkgver=0.3
pkgrel=3
groups=('athena' 'athena-wireless')
pkgdesc='Tool, which automates some of the tasks you might need on a (wireless) penetration test or while you are on the go.'
arch=('any')
url='https://code.google.com/archive/p/ubitack/'
license=('GPL-3.0-or-later')
depends=('bash')
optdepends=('wepbuster: script for automating aircrack-ng'
            'openvpn: open source vpn solution'
            'iodine: Tunnel IPv4 data through a DNS server')
source=("https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/ubitack/$pkgname-$pkgver.tar.gz")
sha512sums=('5da4357ffbb6116685a458858c0d316b4db2f9173b8408ee9887b31f72f08cb7aa573dbe72909df9a8b7b48afd5ba6a2e82bc31f77fbcb73523052b0cdb9410c')

build() {
  cd "$pkgname-$pkgver"

  sed -i 's|/root/ubitack-0.3/logs|/usr/share/ubitack/logs|' ubitack
  sed -i 's|/root/ubitack-0.3/conf|/usr/share/ubitack/conf|' ubitack
  sed -i 's|/usr/local|/usr|g' ubitack
}

package() {
  cd "$pkgname-$pkgver"

  install -dm 755 "$pkgdir/usr/share/$pkgname"
  install -dm 755 "$pkgdir/usr/share/doc/$pkgname"

  install -Dm 755 ubitack "$pkgdir/usr/bin/$pkgname"
  install -Dm 644 COPYING "$pkgdir/usr/share/licenses/$pkgname/COPYING"

  cp -a conf logs "$pkgdir/usr/share/$pkgname/"
  cp -a CHANGELOG README TODO "$pkgdir/usr/share/doc/$pkgname/"
}
