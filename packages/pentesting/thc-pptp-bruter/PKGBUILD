# Credits BlackArch ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=thc-pptp-bruter
pkgver=0.1.4
pkgrel=7
groups=('athena' 'athena-cracker')
pkgdesc='A brute force program that works against pptp vpn endpoints (tcp port 1723).'
url='http://www.thc.org'
license=('GPL-1.0-or-later')
makedepends=('gcc' 'git')
depends=('openssl')
arch=('x86_64' 'aarch64')
source=("git+https://github.com/BlackArch/thc-pptp-bruter.git"
        "Fix-for-new-ssl.patch")
sha512sums=('SKIP'
            'e73700599265dad3af716b30df4c05a2986feaf8dc8681be2a1c5867ed232517b70cffdc254e9cb2956d04839d5178555a1d7f13e7bd0a738605332eef814cbe')

prepare() {
  cd $pkgname

  patch -p1 < "$srcdir/Fix-for-new-ssl.patch"
}

build() {
  cd $pkgname

  if [[ "$CARCH" == "i686" || "$CARCH" == "x86_64" ]];
  then
    ./configure --prefix=/usr
  else
    ./configure --build=arm --prefix=/usr
  fi

  make CFLAGS="$CFLAGS"
}

package() {
  cd $pkgname

  make DESTDIR="$pkgdir" install
}

