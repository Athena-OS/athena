# Credits BlackArch ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=csrftester
pkgver=1.1
pkgrel=1
pkgdesc='The OWASP CSRFTester Project attempts to give developers the ability to test their applications for CSRF flaws.'
url='http://www.owasp.org/index.php/Category:OWASP_CSRFTester_Project'
groups=('athena' 'athena-webapp')
license=('LGPL')
depends=('java-environment')
arch=('any')
source=("$pkgname::git+https://github.com/ot-jerry-welch/owaspcsrftester.git")
sha512sums=('SKIP')

package() {
  cd "$pkgname"

  install -dm 755 "$pkgdir/usr/bin"
  install -dm 755 "$pkgdir/usr/share/$pkgname"

  install -Dm 644 main/CSRFTester/dist/OWASP-CSRFTester-1.1.jar "$pkgdir/usr/share/$pkgname/"

  cat > "$pkgdir/usr/bin/$pkgname" << EOF
#!/bin/sh
cd /usr/share/$pkgname
exec java -classpath ".:lib/concurrent.jar:OWASP-CSRFTester-1.1.jar" org.owasp.csrftester.CSRFTester
EOF

  chmod +x "$pkgdir/usr/bin/$pkgname"
}

